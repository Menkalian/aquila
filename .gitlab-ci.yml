stages:
  - lib-build
  - lib-test
  - lib-deploy
  - application-build
  - application-test
  - application-deploy
  - application-rollout

default:
  image: openjdk:15
  tags:
    - docker

.deployment:
  when: manual
  only:
    refs:
      - main

include:
  - local: ci-configs/aquila_api.yml
  - local: ci-configs/aquila_config.yml
  - local: ci-configs/aquila_server.yml
  - local: ci-configs/aquila_apps.yml